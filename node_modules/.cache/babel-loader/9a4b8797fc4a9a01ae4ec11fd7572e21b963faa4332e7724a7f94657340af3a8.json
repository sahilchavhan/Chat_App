{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar decode_codepoint_1 = __importDefault(require(\"entities/lib/decode_codepoint\"));\nvar entities_json_1 = __importDefault(require(\"entities/lib/maps/entities.json\"));\nvar legacy_json_1 = __importDefault(require(\"entities/lib/maps/legacy.json\"));\nvar xml_json_1 = __importDefault(require(\"entities/lib/maps/xml.json\"));\nfunction whitespace(c) {\n  return c === \" \" || c === \"\\n\" || c === \"\\t\" || c === \"\\f\" || c === \"\\r\";\n}\nfunction isASCIIAlpha(c) {\n  return c >= \"a\" && c <= \"z\" || c >= \"A\" && c <= \"Z\";\n}\nfunction ifElseState(upper, SUCCESS, FAILURE) {\n  var lower = upper.toLowerCase();\n  if (upper === lower) {\n    return function (t, c) {\n      if (c === lower) {\n        t._state = SUCCESS;\n      } else {\n        t._state = FAILURE;\n        t._index--;\n      }\n    };\n  }\n  return function (t, c) {\n    if (c === lower || c === upper) {\n      t._state = SUCCESS;\n    } else {\n      t._state = FAILURE;\n      t._index--;\n    }\n  };\n}\nfunction consumeSpecialNameChar(upper, NEXT_STATE) {\n  var lower = upper.toLowerCase();\n  return function (t, c) {\n    if (c === lower || c === upper) {\n      t._state = NEXT_STATE;\n    } else {\n      t._state = 3 /* InTagName */;\n      t._index--; // Consume the token again\n    }\n  };\n}\n\nvar stateBeforeCdata1 = ifElseState(\"C\", 24 /* BeforeCdata2 */, 16 /* InDeclaration */);\nvar stateBeforeCdata2 = ifElseState(\"D\", 25 /* BeforeCdata3 */, 16 /* InDeclaration */);\nvar stateBeforeCdata3 = ifElseState(\"A\", 26 /* BeforeCdata4 */, 16 /* InDeclaration */);\nvar stateBeforeCdata4 = ifElseState(\"T\", 27 /* BeforeCdata5 */, 16 /* InDeclaration */);\nvar stateBeforeCdata5 = ifElseState(\"A\", 28 /* BeforeCdata6 */, 16 /* InDeclaration */);\nvar stateBeforeScript1 = consumeSpecialNameChar(\"R\", 35 /* BeforeScript2 */);\nvar stateBeforeScript2 = consumeSpecialNameChar(\"I\", 36 /* BeforeScript3 */);\nvar stateBeforeScript3 = consumeSpecialNameChar(\"P\", 37 /* BeforeScript4 */);\nvar stateBeforeScript4 = consumeSpecialNameChar(\"T\", 38 /* BeforeScript5 */);\nvar stateAfterScript1 = ifElseState(\"R\", 40 /* AfterScript2 */, 1 /* Text */);\nvar stateAfterScript2 = ifElseState(\"I\", 41 /* AfterScript3 */, 1 /* Text */);\nvar stateAfterScript3 = ifElseState(\"P\", 42 /* AfterScript4 */, 1 /* Text */);\nvar stateAfterScript4 = ifElseState(\"T\", 43 /* AfterScript5 */, 1 /* Text */);\nvar stateBeforeStyle1 = consumeSpecialNameChar(\"Y\", 45 /* BeforeStyle2 */);\nvar stateBeforeStyle2 = consumeSpecialNameChar(\"L\", 46 /* BeforeStyle3 */);\nvar stateBeforeStyle3 = consumeSpecialNameChar(\"E\", 47 /* BeforeStyle4 */);\nvar stateAfterStyle1 = ifElseState(\"Y\", 49 /* AfterStyle2 */, 1 /* Text */);\nvar stateAfterStyle2 = ifElseState(\"L\", 50 /* AfterStyle3 */, 1 /* Text */);\nvar stateAfterStyle3 = ifElseState(\"E\", 51 /* AfterStyle4 */, 1 /* Text */);\nvar stateBeforeSpecialT = consumeSpecialNameChar(\"I\", 54 /* BeforeTitle1 */);\nvar stateBeforeTitle1 = consumeSpecialNameChar(\"T\", 55 /* BeforeTitle2 */);\nvar stateBeforeTitle2 = consumeSpecialNameChar(\"L\", 56 /* BeforeTitle3 */);\nvar stateBeforeTitle3 = consumeSpecialNameChar(\"E\", 57 /* BeforeTitle4 */);\nvar stateAfterSpecialTEnd = ifElseState(\"I\", 58 /* AfterTitle1 */, 1 /* Text */);\nvar stateAfterTitle1 = ifElseState(\"T\", 59 /* AfterTitle2 */, 1 /* Text */);\nvar stateAfterTitle2 = ifElseState(\"L\", 60 /* AfterTitle3 */, 1 /* Text */);\nvar stateAfterTitle3 = ifElseState(\"E\", 61 /* AfterTitle4 */, 1 /* Text */);\nvar stateBeforeEntity = ifElseState(\"#\", 63 /* BeforeNumericEntity */, 64 /* InNamedEntity */);\nvar stateBeforeNumericEntity = ifElseState(\"X\", 66 /* InHexEntity */, 65 /* InNumericEntity */);\nvar Tokenizer = /** @class */function () {\n  function Tokenizer(options, cbs) {\n    var _a;\n    /** The current state the tokenizer is in. */\n    this._state = 1 /* Text */;\n    /** The read buffer. */\n    this.buffer = \"\";\n    /** The beginning of the section that is currently being read. */\n    this.sectionStart = 0;\n    /** The index within the buffer that we are currently looking at. */\n    this._index = 0;\n    /**\n     * Data that has already been processed will be removed from the buffer occasionally.\n     * `_bufferOffset` keeps track of how many characters have been removed, to make sure position information is accurate.\n     */\n    this.bufferOffset = 0;\n    /** Some behavior, eg. when decoding entities, is done while we are in another state. This keeps track of the other state type. */\n    this.baseState = 1 /* Text */;\n    /** For special parsing behavior inside of script and style tags. */\n    this.special = 1 /* None */;\n    /** Indicates whether the tokenizer has been paused. */\n    this.running = true;\n    /** Indicates whether the tokenizer has finished running / `.end` has been called. */\n    this.ended = false;\n    this.cbs = cbs;\n    this.xmlMode = !!(options === null || options === void 0 ? void 0 : options.xmlMode);\n    this.decodeEntities = (_a = options === null || options === void 0 ? void 0 : options.decodeEntities) !== null && _a !== void 0 ? _a : true;\n  }\n  Tokenizer.prototype.reset = function () {\n    this._state = 1 /* Text */;\n    this.buffer = \"\";\n    this.sectionStart = 0;\n    this._index = 0;\n    this.bufferOffset = 0;\n    this.baseState = 1 /* Text */;\n    this.special = 1 /* None */;\n    this.running = true;\n    this.ended = false;\n  };\n  Tokenizer.prototype.write = function (chunk) {\n    if (this.ended) this.cbs.onerror(Error(\".write() after done!\"));\n    this.buffer += chunk;\n    this.parse();\n  };\n  Tokenizer.prototype.end = function (chunk) {\n    if (this.ended) this.cbs.onerror(Error(\".end() after done!\"));\n    if (chunk) this.write(chunk);\n    this.ended = true;\n    if (this.running) this.finish();\n  };\n  Tokenizer.prototype.pause = function () {\n    this.running = false;\n  };\n  Tokenizer.prototype.resume = function () {\n    this.running = true;\n    if (this._index < this.buffer.length) {\n      this.parse();\n    }\n    if (this.ended) {\n      this.finish();\n    }\n  };\n  /**\n   * The current index within all of the written data.\n   */\n  Tokenizer.prototype.getAbsoluteIndex = function () {\n    return this.bufferOffset + this._index;\n  };\n  Tokenizer.prototype.stateText = function (c) {\n    if (c === \"<\") {\n      if (this._index > this.sectionStart) {\n        this.cbs.ontext(this.getSection());\n      }\n      this._state = 2 /* BeforeTagName */;\n      this.sectionStart = this._index;\n    } else if (this.decodeEntities && c === \"&\" && (this.special === 1 /* None */ || this.special === 4 /* Title */)) {\n      if (this._index > this.sectionStart) {\n        this.cbs.ontext(this.getSection());\n      }\n      this.baseState = 1 /* Text */;\n      this._state = 62 /* BeforeEntity */;\n      this.sectionStart = this._index;\n    }\n  };\n  /**\n   * HTML only allows ASCII alpha characters (a-z and A-Z) at the beginning of a tag name.\n   *\n   * XML allows a lot more characters here (@see https://www.w3.org/TR/REC-xml/#NT-NameStartChar).\n   * We allow anything that wouldn't end the tag.\n   */\n  Tokenizer.prototype.isTagStartChar = function (c) {\n    return isASCIIAlpha(c) || this.xmlMode && !whitespace(c) && c !== \"/\" && c !== \">\";\n  };\n  Tokenizer.prototype.stateBeforeTagName = function (c) {\n    if (c === \"/\") {\n      this._state = 5 /* BeforeClosingTagName */;\n    } else if (c === \"<\") {\n      this.cbs.ontext(this.getSection());\n      this.sectionStart = this._index;\n    } else if (c === \">\" || this.special !== 1 /* None */ || whitespace(c)) {\n      this._state = 1 /* Text */;\n    } else if (c === \"!\") {\n      this._state = 15 /* BeforeDeclaration */;\n      this.sectionStart = this._index + 1;\n    } else if (c === \"?\") {\n      this._state = 17 /* InProcessingInstruction */;\n      this.sectionStart = this._index + 1;\n    } else if (!this.isTagStartChar(c)) {\n      this._state = 1 /* Text */;\n    } else {\n      this._state = !this.xmlMode && (c === \"s\" || c === \"S\") ? 32 /* BeforeSpecialS */ : !this.xmlMode && (c === \"t\" || c === \"T\") ? 52 /* BeforeSpecialT */ : 3 /* InTagName */;\n      this.sectionStart = this._index;\n    }\n  };\n  Tokenizer.prototype.stateInTagName = function (c) {\n    if (c === \"/\" || c === \">\" || whitespace(c)) {\n      this.emitToken(\"onopentagname\");\n      this._state = 8 /* BeforeAttributeName */;\n      this._index--;\n    }\n  };\n  Tokenizer.prototype.stateBeforeClosingTagName = function (c) {\n    if (whitespace(c)) {\n      // Ignore\n    } else if (c === \">\") {\n      this._state = 1 /* Text */;\n    } else if (this.special !== 1 /* None */) {\n      if (this.special !== 4 /* Title */ && (c === \"s\" || c === \"S\")) {\n        this._state = 33 /* BeforeSpecialSEnd */;\n      } else if (this.special === 4 /* Title */ && (c === \"t\" || c === \"T\")) {\n        this._state = 53 /* BeforeSpecialTEnd */;\n      } else {\n        this._state = 1 /* Text */;\n        this._index--;\n      }\n    } else if (!this.isTagStartChar(c)) {\n      this._state = 20 /* InSpecialComment */;\n      this.sectionStart = this._index;\n    } else {\n      this._state = 6 /* InClosingTagName */;\n      this.sectionStart = this._index;\n    }\n  };\n  Tokenizer.prototype.stateInClosingTagName = function (c) {\n    if (c === \">\" || whitespace(c)) {\n      this.emitToken(\"onclosetag\");\n      this._state = 7 /* AfterClosingTagName */;\n      this._index--;\n    }\n  };\n  Tokenizer.prototype.stateAfterClosingTagName = function (c) {\n    // Skip everything until \">\"\n    if (c === \">\") {\n      this._state = 1 /* Text */;\n      this.sectionStart = this._index + 1;\n    }\n  };\n  Tokenizer.prototype.stateBeforeAttributeName = function (c) {\n    if (c === \">\") {\n      this.cbs.onopentagend();\n      this._state = 1 /* Text */;\n      this.sectionStart = this._index + 1;\n    } else if (c === \"/\") {\n      this._state = 4 /* InSelfClosingTag */;\n    } else if (!whitespace(c)) {\n      this._state = 9 /* InAttributeName */;\n      this.sectionStart = this._index;\n    }\n  };\n  Tokenizer.prototype.stateInSelfClosingTag = function (c) {\n    if (c === \">\") {\n      this.cbs.onselfclosingtag();\n      this._state = 1 /* Text */;\n      this.sectionStart = this._index + 1;\n      this.special = 1 /* None */; // Reset special state, in case of self-closing special tags\n    } else if (!whitespace(c)) {\n      this._state = 8 /* BeforeAttributeName */;\n      this._index--;\n    }\n  };\n  Tokenizer.prototype.stateInAttributeName = function (c) {\n    if (c === \"=\" || c === \"/\" || c === \">\" || whitespace(c)) {\n      this.cbs.onattribname(this.getSection());\n      this.sectionStart = -1;\n      this._state = 10 /* AfterAttributeName */;\n      this._index--;\n    }\n  };\n  Tokenizer.prototype.stateAfterAttributeName = function (c) {\n    if (c === \"=\") {\n      this._state = 11 /* BeforeAttributeValue */;\n    } else if (c === \"/\" || c === \">\") {\n      this.cbs.onattribend(undefined);\n      this._state = 8 /* BeforeAttributeName */;\n      this._index--;\n    } else if (!whitespace(c)) {\n      this.cbs.onattribend(undefined);\n      this._state = 9 /* InAttributeName */;\n      this.sectionStart = this._index;\n    }\n  };\n  Tokenizer.prototype.stateBeforeAttributeValue = function (c) {\n    if (c === '\"') {\n      this._state = 12 /* InAttributeValueDq */;\n      this.sectionStart = this._index + 1;\n    } else if (c === \"'\") {\n      this._state = 13 /* InAttributeValueSq */;\n      this.sectionStart = this._index + 1;\n    } else if (!whitespace(c)) {\n      this._state = 14 /* InAttributeValueNq */;\n      this.sectionStart = this._index;\n      this._index--; // Reconsume token\n    }\n  };\n\n  Tokenizer.prototype.handleInAttributeValue = function (c, quote) {\n    if (c === quote) {\n      this.emitToken(\"onattribdata\");\n      this.cbs.onattribend(quote);\n      this._state = 8 /* BeforeAttributeName */;\n    } else if (this.decodeEntities && c === \"&\") {\n      this.emitToken(\"onattribdata\");\n      this.baseState = this._state;\n      this._state = 62 /* BeforeEntity */;\n      this.sectionStart = this._index;\n    }\n  };\n  Tokenizer.prototype.stateInAttributeValueDoubleQuotes = function (c) {\n    this.handleInAttributeValue(c, '\"');\n  };\n  Tokenizer.prototype.stateInAttributeValueSingleQuotes = function (c) {\n    this.handleInAttributeValue(c, \"'\");\n  };\n  Tokenizer.prototype.stateInAttributeValueNoQuotes = function (c) {\n    if (whitespace(c) || c === \">\") {\n      this.emitToken(\"onattribdata\");\n      this.cbs.onattribend(null);\n      this._state = 8 /* BeforeAttributeName */;\n      this._index--;\n    } else if (this.decodeEntities && c === \"&\") {\n      this.emitToken(\"onattribdata\");\n      this.baseState = this._state;\n      this._state = 62 /* BeforeEntity */;\n      this.sectionStart = this._index;\n    }\n  };\n  Tokenizer.prototype.stateBeforeDeclaration = function (c) {\n    this._state = c === \"[\" ? 23 /* BeforeCdata1 */ : c === \"-\" ? 18 /* BeforeComment */ : 16 /* InDeclaration */;\n  };\n\n  Tokenizer.prototype.stateInDeclaration = function (c) {\n    if (c === \">\") {\n      this.cbs.ondeclaration(this.getSection());\n      this._state = 1 /* Text */;\n      this.sectionStart = this._index + 1;\n    }\n  };\n  Tokenizer.prototype.stateInProcessingInstruction = function (c) {\n    if (c === \">\") {\n      this.cbs.onprocessinginstruction(this.getSection());\n      this._state = 1 /* Text */;\n      this.sectionStart = this._index + 1;\n    }\n  };\n  Tokenizer.prototype.stateBeforeComment = function (c) {\n    if (c === \"-\") {\n      this._state = 19 /* InComment */;\n      this.sectionStart = this._index + 1;\n    } else {\n      this._state = 16 /* InDeclaration */;\n    }\n  };\n\n  Tokenizer.prototype.stateInComment = function (c) {\n    if (c === \"-\") this._state = 21 /* AfterComment1 */;\n  };\n\n  Tokenizer.prototype.stateInSpecialComment = function (c) {\n    if (c === \">\") {\n      this.cbs.oncomment(this.buffer.substring(this.sectionStart, this._index));\n      this._state = 1 /* Text */;\n      this.sectionStart = this._index + 1;\n    }\n  };\n  Tokenizer.prototype.stateAfterComment1 = function (c) {\n    if (c === \"-\") {\n      this._state = 22 /* AfterComment2 */;\n    } else {\n      this._state = 19 /* InComment */;\n    }\n  };\n\n  Tokenizer.prototype.stateAfterComment2 = function (c) {\n    if (c === \">\") {\n      // Remove 2 trailing chars\n      this.cbs.oncomment(this.buffer.substring(this.sectionStart, this._index - 2));\n      this._state = 1 /* Text */;\n      this.sectionStart = this._index + 1;\n    } else if (c !== \"-\") {\n      this._state = 19 /* InComment */;\n    }\n    // Else: stay in AFTER_COMMENT_2 (`--->`)\n  };\n\n  Tokenizer.prototype.stateBeforeCdata6 = function (c) {\n    if (c === \"[\") {\n      this._state = 29 /* InCdata */;\n      this.sectionStart = this._index + 1;\n    } else {\n      this._state = 16 /* InDeclaration */;\n      this._index--;\n    }\n  };\n  Tokenizer.prototype.stateInCdata = function (c) {\n    if (c === \"]\") this._state = 30 /* AfterCdata1 */;\n  };\n\n  Tokenizer.prototype.stateAfterCdata1 = function (c) {\n    if (c === \"]\") this._state = 31 /* AfterCdata2 */;else this._state = 29 /* InCdata */;\n  };\n\n  Tokenizer.prototype.stateAfterCdata2 = function (c) {\n    if (c === \">\") {\n      // Remove 2 trailing chars\n      this.cbs.oncdata(this.buffer.substring(this.sectionStart, this._index - 2));\n      this._state = 1 /* Text */;\n      this.sectionStart = this._index + 1;\n    } else if (c !== \"]\") {\n      this._state = 29 /* InCdata */;\n    }\n    // Else: stay in AFTER_CDATA_2 (`]]]>`)\n  };\n\n  Tokenizer.prototype.stateBeforeSpecialS = function (c) {\n    if (c === \"c\" || c === \"C\") {\n      this._state = 34 /* BeforeScript1 */;\n    } else if (c === \"t\" || c === \"T\") {\n      this._state = 44 /* BeforeStyle1 */;\n    } else {\n      this._state = 3 /* InTagName */;\n      this._index--; // Consume the token again\n    }\n  };\n\n  Tokenizer.prototype.stateBeforeSpecialSEnd = function (c) {\n    if (this.special === 2 /* Script */ && (c === \"c\" || c === \"C\")) {\n      this._state = 39 /* AfterScript1 */;\n    } else if (this.special === 3 /* Style */ && (c === \"t\" || c === \"T\")) {\n      this._state = 48 /* AfterStyle1 */;\n    } else this._state = 1 /* Text */;\n  };\n\n  Tokenizer.prototype.stateBeforeSpecialLast = function (c, special) {\n    if (c === \"/\" || c === \">\" || whitespace(c)) {\n      this.special = special;\n    }\n    this._state = 3 /* InTagName */;\n    this._index--; // Consume the token again\n  };\n\n  Tokenizer.prototype.stateAfterSpecialLast = function (c, sectionStartOffset) {\n    if (c === \">\" || whitespace(c)) {\n      this.special = 1 /* None */;\n      this._state = 6 /* InClosingTagName */;\n      this.sectionStart = this._index - sectionStartOffset;\n      this._index--; // Reconsume the token\n    } else this._state = 1 /* Text */;\n  };\n  // For entities terminated with a semicolon\n  Tokenizer.prototype.parseFixedEntity = function (map) {\n    if (map === void 0) {\n      map = this.xmlMode ? xml_json_1.default : entities_json_1.default;\n    }\n    // Offset = 1\n    if (this.sectionStart + 1 < this._index) {\n      var entity = this.buffer.substring(this.sectionStart + 1, this._index);\n      if (Object.prototype.hasOwnProperty.call(map, entity)) {\n        this.emitPartial(map[entity]);\n        this.sectionStart = this._index + 1;\n      }\n    }\n  };\n  // Parses legacy entities (without trailing semicolon)\n  Tokenizer.prototype.parseLegacyEntity = function () {\n    var start = this.sectionStart + 1;\n    // The max length of legacy entities is 6\n    var limit = Math.min(this._index - start, 6);\n    while (limit >= 2) {\n      // The min length of legacy entities is 2\n      var entity = this.buffer.substr(start, limit);\n      if (Object.prototype.hasOwnProperty.call(legacy_json_1.default, entity)) {\n        this.emitPartial(legacy_json_1.default[entity]);\n        this.sectionStart += limit + 1;\n        return;\n      }\n      limit--;\n    }\n  };\n  Tokenizer.prototype.stateInNamedEntity = function (c) {\n    if (c === \";\") {\n      this.parseFixedEntity();\n      // Retry as legacy entity if entity wasn't parsed\n      if (this.baseState === 1 /* Text */ && this.sectionStart + 1 < this._index && !this.xmlMode) {\n        this.parseLegacyEntity();\n      }\n      this._state = this.baseState;\n    } else if ((c < \"0\" || c > \"9\") && !isASCIIAlpha(c)) {\n      if (this.xmlMode || this.sectionStart + 1 === this._index) {\n        // Ignore\n      } else if (this.baseState !== 1 /* Text */) {\n        if (c !== \"=\") {\n          // Parse as legacy entity, without allowing additional characters.\n          this.parseFixedEntity(legacy_json_1.default);\n        }\n      } else {\n        this.parseLegacyEntity();\n      }\n      this._state = this.baseState;\n      this._index--;\n    }\n  };\n  Tokenizer.prototype.decodeNumericEntity = function (offset, base, strict) {\n    var sectionStart = this.sectionStart + offset;\n    if (sectionStart !== this._index) {\n      // Parse entity\n      var entity = this.buffer.substring(sectionStart, this._index);\n      var parsed = parseInt(entity, base);\n      this.emitPartial(decode_codepoint_1.default(parsed));\n      this.sectionStart = strict ? this._index + 1 : this._index;\n    }\n    this._state = this.baseState;\n  };\n  Tokenizer.prototype.stateInNumericEntity = function (c) {\n    if (c === \";\") {\n      this.decodeNumericEntity(2, 10, true);\n    } else if (c < \"0\" || c > \"9\") {\n      if (!this.xmlMode) {\n        this.decodeNumericEntity(2, 10, false);\n      } else {\n        this._state = this.baseState;\n      }\n      this._index--;\n    }\n  };\n  Tokenizer.prototype.stateInHexEntity = function (c) {\n    if (c === \";\") {\n      this.decodeNumericEntity(3, 16, true);\n    } else if ((c < \"a\" || c > \"f\") && (c < \"A\" || c > \"F\") && (c < \"0\" || c > \"9\")) {\n      if (!this.xmlMode) {\n        this.decodeNumericEntity(3, 16, false);\n      } else {\n        this._state = this.baseState;\n      }\n      this._index--;\n    }\n  };\n  Tokenizer.prototype.cleanup = function () {\n    if (this.sectionStart < 0) {\n      this.buffer = \"\";\n      this.bufferOffset += this._index;\n      this._index = 0;\n    } else if (this.running) {\n      if (this._state === 1 /* Text */) {\n        if (this.sectionStart !== this._index) {\n          this.cbs.ontext(this.buffer.substr(this.sectionStart));\n        }\n        this.buffer = \"\";\n        this.bufferOffset += this._index;\n        this._index = 0;\n      } else if (this.sectionStart === this._index) {\n        // The section just started\n        this.buffer = \"\";\n        this.bufferOffset += this._index;\n        this._index = 0;\n      } else {\n        // Remove everything unnecessary\n        this.buffer = this.buffer.substr(this.sectionStart);\n        this._index -= this.sectionStart;\n        this.bufferOffset += this.sectionStart;\n      }\n      this.sectionStart = 0;\n    }\n  };\n  /**\n   * Iterates through the buffer, calling the function corresponding to the current state.\n   *\n   * States that are more likely to be hit are higher up, as a performance improvement.\n   */\n  Tokenizer.prototype.parse = function () {\n    while (this._index < this.buffer.length && this.running) {\n      var c = this.buffer.charAt(this._index);\n      if (this._state === 1 /* Text */) {\n        this.stateText(c);\n      } else if (this._state === 12 /* InAttributeValueDq */) {\n        this.stateInAttributeValueDoubleQuotes(c);\n      } else if (this._state === 9 /* InAttributeName */) {\n        this.stateInAttributeName(c);\n      } else if (this._state === 19 /* InComment */) {\n        this.stateInComment(c);\n      } else if (this._state === 20 /* InSpecialComment */) {\n        this.stateInSpecialComment(c);\n      } else if (this._state === 8 /* BeforeAttributeName */) {\n        this.stateBeforeAttributeName(c);\n      } else if (this._state === 3 /* InTagName */) {\n        this.stateInTagName(c);\n      } else if (this._state === 6 /* InClosingTagName */) {\n        this.stateInClosingTagName(c);\n      } else if (this._state === 2 /* BeforeTagName */) {\n        this.stateBeforeTagName(c);\n      } else if (this._state === 10 /* AfterAttributeName */) {\n        this.stateAfterAttributeName(c);\n      } else if (this._state === 13 /* InAttributeValueSq */) {\n        this.stateInAttributeValueSingleQuotes(c);\n      } else if (this._state === 11 /* BeforeAttributeValue */) {\n        this.stateBeforeAttributeValue(c);\n      } else if (this._state === 5 /* BeforeClosingTagName */) {\n        this.stateBeforeClosingTagName(c);\n      } else if (this._state === 7 /* AfterClosingTagName */) {\n        this.stateAfterClosingTagName(c);\n      } else if (this._state === 32 /* BeforeSpecialS */) {\n        this.stateBeforeSpecialS(c);\n      } else if (this._state === 21 /* AfterComment1 */) {\n        this.stateAfterComment1(c);\n      } else if (this._state === 14 /* InAttributeValueNq */) {\n        this.stateInAttributeValueNoQuotes(c);\n      } else if (this._state === 4 /* InSelfClosingTag */) {\n        this.stateInSelfClosingTag(c);\n      } else if (this._state === 16 /* InDeclaration */) {\n        this.stateInDeclaration(c);\n      } else if (this._state === 15 /* BeforeDeclaration */) {\n        this.stateBeforeDeclaration(c);\n      } else if (this._state === 22 /* AfterComment2 */) {\n        this.stateAfterComment2(c);\n      } else if (this._state === 18 /* BeforeComment */) {\n        this.stateBeforeComment(c);\n      } else if (this._state === 33 /* BeforeSpecialSEnd */) {\n        this.stateBeforeSpecialSEnd(c);\n      } else if (this._state === 53 /* BeforeSpecialTEnd */) {\n        stateAfterSpecialTEnd(this, c);\n      } else if (this._state === 39 /* AfterScript1 */) {\n        stateAfterScript1(this, c);\n      } else if (this._state === 40 /* AfterScript2 */) {\n        stateAfterScript2(this, c);\n      } else if (this._state === 41 /* AfterScript3 */) {\n        stateAfterScript3(this, c);\n      } else if (this._state === 34 /* BeforeScript1 */) {\n        stateBeforeScript1(this, c);\n      } else if (this._state === 35 /* BeforeScript2 */) {\n        stateBeforeScript2(this, c);\n      } else if (this._state === 36 /* BeforeScript3 */) {\n        stateBeforeScript3(this, c);\n      } else if (this._state === 37 /* BeforeScript4 */) {\n        stateBeforeScript4(this, c);\n      } else if (this._state === 38 /* BeforeScript5 */) {\n        this.stateBeforeSpecialLast(c, 2 /* Script */);\n      } else if (this._state === 42 /* AfterScript4 */) {\n        stateAfterScript4(this, c);\n      } else if (this._state === 43 /* AfterScript5 */) {\n        this.stateAfterSpecialLast(c, 6);\n      } else if (this._state === 44 /* BeforeStyle1 */) {\n        stateBeforeStyle1(this, c);\n      } else if (this._state === 29 /* InCdata */) {\n        this.stateInCdata(c);\n      } else if (this._state === 45 /* BeforeStyle2 */) {\n        stateBeforeStyle2(this, c);\n      } else if (this._state === 46 /* BeforeStyle3 */) {\n        stateBeforeStyle3(this, c);\n      } else if (this._state === 47 /* BeforeStyle4 */) {\n        this.stateBeforeSpecialLast(c, 3 /* Style */);\n      } else if (this._state === 48 /* AfterStyle1 */) {\n        stateAfterStyle1(this, c);\n      } else if (this._state === 49 /* AfterStyle2 */) {\n        stateAfterStyle2(this, c);\n      } else if (this._state === 50 /* AfterStyle3 */) {\n        stateAfterStyle3(this, c);\n      } else if (this._state === 51 /* AfterStyle4 */) {\n        this.stateAfterSpecialLast(c, 5);\n      } else if (this._state === 52 /* BeforeSpecialT */) {\n        stateBeforeSpecialT(this, c);\n      } else if (this._state === 54 /* BeforeTitle1 */) {\n        stateBeforeTitle1(this, c);\n      } else if (this._state === 55 /* BeforeTitle2 */) {\n        stateBeforeTitle2(this, c);\n      } else if (this._state === 56 /* BeforeTitle3 */) {\n        stateBeforeTitle3(this, c);\n      } else if (this._state === 57 /* BeforeTitle4 */) {\n        this.stateBeforeSpecialLast(c, 4 /* Title */);\n      } else if (this._state === 58 /* AfterTitle1 */) {\n        stateAfterTitle1(this, c);\n      } else if (this._state === 59 /* AfterTitle2 */) {\n        stateAfterTitle2(this, c);\n      } else if (this._state === 60 /* AfterTitle3 */) {\n        stateAfterTitle3(this, c);\n      } else if (this._state === 61 /* AfterTitle4 */) {\n        this.stateAfterSpecialLast(c, 5);\n      } else if (this._state === 17 /* InProcessingInstruction */) {\n        this.stateInProcessingInstruction(c);\n      } else if (this._state === 64 /* InNamedEntity */) {\n        this.stateInNamedEntity(c);\n      } else if (this._state === 23 /* BeforeCdata1 */) {\n        stateBeforeCdata1(this, c);\n      } else if (this._state === 62 /* BeforeEntity */) {\n        stateBeforeEntity(this, c);\n      } else if (this._state === 24 /* BeforeCdata2 */) {\n        stateBeforeCdata2(this, c);\n      } else if (this._state === 25 /* BeforeCdata3 */) {\n        stateBeforeCdata3(this, c);\n      } else if (this._state === 30 /* AfterCdata1 */) {\n        this.stateAfterCdata1(c);\n      } else if (this._state === 31 /* AfterCdata2 */) {\n        this.stateAfterCdata2(c);\n      } else if (this._state === 26 /* BeforeCdata4 */) {\n        stateBeforeCdata4(this, c);\n      } else if (this._state === 27 /* BeforeCdata5 */) {\n        stateBeforeCdata5(this, c);\n      } else if (this._state === 28 /* BeforeCdata6 */) {\n        this.stateBeforeCdata6(c);\n      } else if (this._state === 66 /* InHexEntity */) {\n        this.stateInHexEntity(c);\n      } else if (this._state === 65 /* InNumericEntity */) {\n        this.stateInNumericEntity(c);\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n      } else if (this._state === 63 /* BeforeNumericEntity */) {\n        stateBeforeNumericEntity(this, c);\n      } else {\n        this.cbs.onerror(Error(\"unknown _state\"), this._state);\n      }\n      this._index++;\n    }\n    this.cleanup();\n  };\n  Tokenizer.prototype.finish = function () {\n    // If there is remaining data, emit it in a reasonable way\n    if (this.sectionStart < this._index) {\n      this.handleTrailingData();\n    }\n    this.cbs.onend();\n  };\n  Tokenizer.prototype.handleTrailingData = function () {\n    var data = this.buffer.substr(this.sectionStart);\n    if (this._state === 29 /* InCdata */ || this._state === 30 /* AfterCdata1 */ || this._state === 31 /* AfterCdata2 */) {\n      this.cbs.oncdata(data);\n    } else if (this._state === 19 /* InComment */ || this._state === 21 /* AfterComment1 */ || this._state === 22 /* AfterComment2 */) {\n      this.cbs.oncomment(data);\n    } else if (this._state === 64 /* InNamedEntity */ && !this.xmlMode) {\n      this.parseLegacyEntity();\n      if (this.sectionStart < this._index) {\n        this._state = this.baseState;\n        this.handleTrailingData();\n      }\n    } else if (this._state === 65 /* InNumericEntity */ && !this.xmlMode) {\n      this.decodeNumericEntity(2, 10, false);\n      if (this.sectionStart < this._index) {\n        this._state = this.baseState;\n        this.handleTrailingData();\n      }\n    } else if (this._state === 66 /* InHexEntity */ && !this.xmlMode) {\n      this.decodeNumericEntity(3, 16, false);\n      if (this.sectionStart < this._index) {\n        this._state = this.baseState;\n        this.handleTrailingData();\n      }\n    } else if (this._state !== 3 /* InTagName */ && this._state !== 8 /* BeforeAttributeName */ && this._state !== 11 /* BeforeAttributeValue */ && this._state !== 10 /* AfterAttributeName */ && this._state !== 9 /* InAttributeName */ && this._state !== 13 /* InAttributeValueSq */ && this._state !== 12 /* InAttributeValueDq */ && this._state !== 14 /* InAttributeValueNq */ && this._state !== 6 /* InClosingTagName */) {\n      this.cbs.ontext(data);\n    }\n    /*\n     * Else, ignore remaining data\n     * TODO add a way to remove current tag\n     */\n  };\n\n  Tokenizer.prototype.getSection = function () {\n    return this.buffer.substring(this.sectionStart, this._index);\n  };\n  Tokenizer.prototype.emitToken = function (name) {\n    this.cbs[name](this.getSection());\n    this.sectionStart = -1;\n  };\n  Tokenizer.prototype.emitPartial = function (value) {\n    if (this.baseState !== 1 /* Text */) {\n      this.cbs.onattribdata(value); // TODO implement the new event\n    } else {\n      this.cbs.ontext(value);\n    }\n  };\n  return Tokenizer;\n}();\nexports.default = Tokenizer;","map":{"version":3,"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","decode_codepoint_1","require","entities_json_1","legacy_json_1","xml_json_1","whitespace","c","isASCIIAlpha","ifElseState","upper","SUCCESS","FAILURE","lower","toLowerCase","t","_state","_index","consumeSpecialNameChar","NEXT_STATE","stateBeforeCdata1","stateBeforeCdata2","stateBeforeCdata3","stateBeforeCdata4","stateBeforeCdata5","stateBeforeScript1","stateBeforeScript2","stateBeforeScript3","stateBeforeScript4","stateAfterScript1","stateAfterScript2","stateAfterScript3","stateAfterScript4","stateBeforeStyle1","stateBeforeStyle2","stateBeforeStyle3","stateAfterStyle1","stateAfterStyle2","stateAfterStyle3","stateBeforeSpecialT","stateBeforeTitle1","stateBeforeTitle2","stateBeforeTitle3","stateAfterSpecialTEnd","stateAfterTitle1","stateAfterTitle2","stateAfterTitle3","stateBeforeEntity","stateBeforeNumericEntity","Tokenizer","options","cbs","_a","buffer","sectionStart","bufferOffset","baseState","special","running","ended","xmlMode","decodeEntities","prototype","reset","write","chunk","onerror","Error","parse","end","finish","pause","resume","length","getAbsoluteIndex","stateText","ontext","getSection","isTagStartChar","stateBeforeTagName","stateInTagName","emitToken","stateBeforeClosingTagName","stateInClosingTagName","stateAfterClosingTagName","stateBeforeAttributeName","onopentagend","stateInSelfClosingTag","onselfclosingtag","stateInAttributeName","onattribname","stateAfterAttributeName","onattribend","undefined","stateBeforeAttributeValue","handleInAttributeValue","quote","stateInAttributeValueDoubleQuotes","stateInAttributeValueSingleQuotes","stateInAttributeValueNoQuotes","stateBeforeDeclaration","stateInDeclaration","ondeclaration","stateInProcessingInstruction","onprocessinginstruction","stateBeforeComment","stateInComment","stateInSpecialComment","oncomment","substring","stateAfterComment1","stateAfterComment2","stateBeforeCdata6","stateInCdata","stateAfterCdata1","stateAfterCdata2","oncdata","stateBeforeSpecialS","stateBeforeSpecialSEnd","stateBeforeSpecialLast","stateAfterSpecialLast","sectionStartOffset","parseFixedEntity","map","default","entity","hasOwnProperty","call","emitPartial","parseLegacyEntity","start","limit","Math","min","substr","stateInNamedEntity","decodeNumericEntity","offset","base","strict","parsed","parseInt","stateInNumericEntity","stateInHexEntity","cleanup","charAt","handleTrailingData","onend","data","name","onattribdata"],"sources":["C:/Users/Tapasya/Desktop/SAHIL VIT/chatapp/node_modules/htmlparser2/lib/Tokenizer.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar decode_codepoint_1 = __importDefault(require(\"entities/lib/decode_codepoint\"));\nvar entities_json_1 = __importDefault(require(\"entities/lib/maps/entities.json\"));\nvar legacy_json_1 = __importDefault(require(\"entities/lib/maps/legacy.json\"));\nvar xml_json_1 = __importDefault(require(\"entities/lib/maps/xml.json\"));\nfunction whitespace(c) {\n    return c === \" \" || c === \"\\n\" || c === \"\\t\" || c === \"\\f\" || c === \"\\r\";\n}\nfunction isASCIIAlpha(c) {\n    return (c >= \"a\" && c <= \"z\") || (c >= \"A\" && c <= \"Z\");\n}\nfunction ifElseState(upper, SUCCESS, FAILURE) {\n    var lower = upper.toLowerCase();\n    if (upper === lower) {\n        return function (t, c) {\n            if (c === lower) {\n                t._state = SUCCESS;\n            }\n            else {\n                t._state = FAILURE;\n                t._index--;\n            }\n        };\n    }\n    return function (t, c) {\n        if (c === lower || c === upper) {\n            t._state = SUCCESS;\n        }\n        else {\n            t._state = FAILURE;\n            t._index--;\n        }\n    };\n}\nfunction consumeSpecialNameChar(upper, NEXT_STATE) {\n    var lower = upper.toLowerCase();\n    return function (t, c) {\n        if (c === lower || c === upper) {\n            t._state = NEXT_STATE;\n        }\n        else {\n            t._state = 3 /* InTagName */;\n            t._index--; // Consume the token again\n        }\n    };\n}\nvar stateBeforeCdata1 = ifElseState(\"C\", 24 /* BeforeCdata2 */, 16 /* InDeclaration */);\nvar stateBeforeCdata2 = ifElseState(\"D\", 25 /* BeforeCdata3 */, 16 /* InDeclaration */);\nvar stateBeforeCdata3 = ifElseState(\"A\", 26 /* BeforeCdata4 */, 16 /* InDeclaration */);\nvar stateBeforeCdata4 = ifElseState(\"T\", 27 /* BeforeCdata5 */, 16 /* InDeclaration */);\nvar stateBeforeCdata5 = ifElseState(\"A\", 28 /* BeforeCdata6 */, 16 /* InDeclaration */);\nvar stateBeforeScript1 = consumeSpecialNameChar(\"R\", 35 /* BeforeScript2 */);\nvar stateBeforeScript2 = consumeSpecialNameChar(\"I\", 36 /* BeforeScript3 */);\nvar stateBeforeScript3 = consumeSpecialNameChar(\"P\", 37 /* BeforeScript4 */);\nvar stateBeforeScript4 = consumeSpecialNameChar(\"T\", 38 /* BeforeScript5 */);\nvar stateAfterScript1 = ifElseState(\"R\", 40 /* AfterScript2 */, 1 /* Text */);\nvar stateAfterScript2 = ifElseState(\"I\", 41 /* AfterScript3 */, 1 /* Text */);\nvar stateAfterScript3 = ifElseState(\"P\", 42 /* AfterScript4 */, 1 /* Text */);\nvar stateAfterScript4 = ifElseState(\"T\", 43 /* AfterScript5 */, 1 /* Text */);\nvar stateBeforeStyle1 = consumeSpecialNameChar(\"Y\", 45 /* BeforeStyle2 */);\nvar stateBeforeStyle2 = consumeSpecialNameChar(\"L\", 46 /* BeforeStyle3 */);\nvar stateBeforeStyle3 = consumeSpecialNameChar(\"E\", 47 /* BeforeStyle4 */);\nvar stateAfterStyle1 = ifElseState(\"Y\", 49 /* AfterStyle2 */, 1 /* Text */);\nvar stateAfterStyle2 = ifElseState(\"L\", 50 /* AfterStyle3 */, 1 /* Text */);\nvar stateAfterStyle3 = ifElseState(\"E\", 51 /* AfterStyle4 */, 1 /* Text */);\nvar stateBeforeSpecialT = consumeSpecialNameChar(\"I\", 54 /* BeforeTitle1 */);\nvar stateBeforeTitle1 = consumeSpecialNameChar(\"T\", 55 /* BeforeTitle2 */);\nvar stateBeforeTitle2 = consumeSpecialNameChar(\"L\", 56 /* BeforeTitle3 */);\nvar stateBeforeTitle3 = consumeSpecialNameChar(\"E\", 57 /* BeforeTitle4 */);\nvar stateAfterSpecialTEnd = ifElseState(\"I\", 58 /* AfterTitle1 */, 1 /* Text */);\nvar stateAfterTitle1 = ifElseState(\"T\", 59 /* AfterTitle2 */, 1 /* Text */);\nvar stateAfterTitle2 = ifElseState(\"L\", 60 /* AfterTitle3 */, 1 /* Text */);\nvar stateAfterTitle3 = ifElseState(\"E\", 61 /* AfterTitle4 */, 1 /* Text */);\nvar stateBeforeEntity = ifElseState(\"#\", 63 /* BeforeNumericEntity */, 64 /* InNamedEntity */);\nvar stateBeforeNumericEntity = ifElseState(\"X\", 66 /* InHexEntity */, 65 /* InNumericEntity */);\nvar Tokenizer = /** @class */ (function () {\n    function Tokenizer(options, cbs) {\n        var _a;\n        /** The current state the tokenizer is in. */\n        this._state = 1 /* Text */;\n        /** The read buffer. */\n        this.buffer = \"\";\n        /** The beginning of the section that is currently being read. */\n        this.sectionStart = 0;\n        /** The index within the buffer that we are currently looking at. */\n        this._index = 0;\n        /**\n         * Data that has already been processed will be removed from the buffer occasionally.\n         * `_bufferOffset` keeps track of how many characters have been removed, to make sure position information is accurate.\n         */\n        this.bufferOffset = 0;\n        /** Some behavior, eg. when decoding entities, is done while we are in another state. This keeps track of the other state type. */\n        this.baseState = 1 /* Text */;\n        /** For special parsing behavior inside of script and style tags. */\n        this.special = 1 /* None */;\n        /** Indicates whether the tokenizer has been paused. */\n        this.running = true;\n        /** Indicates whether the tokenizer has finished running / `.end` has been called. */\n        this.ended = false;\n        this.cbs = cbs;\n        this.xmlMode = !!(options === null || options === void 0 ? void 0 : options.xmlMode);\n        this.decodeEntities = (_a = options === null || options === void 0 ? void 0 : options.decodeEntities) !== null && _a !== void 0 ? _a : true;\n    }\n    Tokenizer.prototype.reset = function () {\n        this._state = 1 /* Text */;\n        this.buffer = \"\";\n        this.sectionStart = 0;\n        this._index = 0;\n        this.bufferOffset = 0;\n        this.baseState = 1 /* Text */;\n        this.special = 1 /* None */;\n        this.running = true;\n        this.ended = false;\n    };\n    Tokenizer.prototype.write = function (chunk) {\n        if (this.ended)\n            this.cbs.onerror(Error(\".write() after done!\"));\n        this.buffer += chunk;\n        this.parse();\n    };\n    Tokenizer.prototype.end = function (chunk) {\n        if (this.ended)\n            this.cbs.onerror(Error(\".end() after done!\"));\n        if (chunk)\n            this.write(chunk);\n        this.ended = true;\n        if (this.running)\n            this.finish();\n    };\n    Tokenizer.prototype.pause = function () {\n        this.running = false;\n    };\n    Tokenizer.prototype.resume = function () {\n        this.running = true;\n        if (this._index < this.buffer.length) {\n            this.parse();\n        }\n        if (this.ended) {\n            this.finish();\n        }\n    };\n    /**\n     * The current index within all of the written data.\n     */\n    Tokenizer.prototype.getAbsoluteIndex = function () {\n        return this.bufferOffset + this._index;\n    };\n    Tokenizer.prototype.stateText = function (c) {\n        if (c === \"<\") {\n            if (this._index > this.sectionStart) {\n                this.cbs.ontext(this.getSection());\n            }\n            this._state = 2 /* BeforeTagName */;\n            this.sectionStart = this._index;\n        }\n        else if (this.decodeEntities &&\n            c === \"&\" &&\n            (this.special === 1 /* None */ || this.special === 4 /* Title */)) {\n            if (this._index > this.sectionStart) {\n                this.cbs.ontext(this.getSection());\n            }\n            this.baseState = 1 /* Text */;\n            this._state = 62 /* BeforeEntity */;\n            this.sectionStart = this._index;\n        }\n    };\n    /**\n     * HTML only allows ASCII alpha characters (a-z and A-Z) at the beginning of a tag name.\n     *\n     * XML allows a lot more characters here (@see https://www.w3.org/TR/REC-xml/#NT-NameStartChar).\n     * We allow anything that wouldn't end the tag.\n     */\n    Tokenizer.prototype.isTagStartChar = function (c) {\n        return (isASCIIAlpha(c) ||\n            (this.xmlMode && !whitespace(c) && c !== \"/\" && c !== \">\"));\n    };\n    Tokenizer.prototype.stateBeforeTagName = function (c) {\n        if (c === \"/\") {\n            this._state = 5 /* BeforeClosingTagName */;\n        }\n        else if (c === \"<\") {\n            this.cbs.ontext(this.getSection());\n            this.sectionStart = this._index;\n        }\n        else if (c === \">\" ||\n            this.special !== 1 /* None */ ||\n            whitespace(c)) {\n            this._state = 1 /* Text */;\n        }\n        else if (c === \"!\") {\n            this._state = 15 /* BeforeDeclaration */;\n            this.sectionStart = this._index + 1;\n        }\n        else if (c === \"?\") {\n            this._state = 17 /* InProcessingInstruction */;\n            this.sectionStart = this._index + 1;\n        }\n        else if (!this.isTagStartChar(c)) {\n            this._state = 1 /* Text */;\n        }\n        else {\n            this._state =\n                !this.xmlMode && (c === \"s\" || c === \"S\")\n                    ? 32 /* BeforeSpecialS */\n                    : !this.xmlMode && (c === \"t\" || c === \"T\")\n                        ? 52 /* BeforeSpecialT */\n                        : 3 /* InTagName */;\n            this.sectionStart = this._index;\n        }\n    };\n    Tokenizer.prototype.stateInTagName = function (c) {\n        if (c === \"/\" || c === \">\" || whitespace(c)) {\n            this.emitToken(\"onopentagname\");\n            this._state = 8 /* BeforeAttributeName */;\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.stateBeforeClosingTagName = function (c) {\n        if (whitespace(c)) {\n            // Ignore\n        }\n        else if (c === \">\") {\n            this._state = 1 /* Text */;\n        }\n        else if (this.special !== 1 /* None */) {\n            if (this.special !== 4 /* Title */ && (c === \"s\" || c === \"S\")) {\n                this._state = 33 /* BeforeSpecialSEnd */;\n            }\n            else if (this.special === 4 /* Title */ &&\n                (c === \"t\" || c === \"T\")) {\n                this._state = 53 /* BeforeSpecialTEnd */;\n            }\n            else {\n                this._state = 1 /* Text */;\n                this._index--;\n            }\n        }\n        else if (!this.isTagStartChar(c)) {\n            this._state = 20 /* InSpecialComment */;\n            this.sectionStart = this._index;\n        }\n        else {\n            this._state = 6 /* InClosingTagName */;\n            this.sectionStart = this._index;\n        }\n    };\n    Tokenizer.prototype.stateInClosingTagName = function (c) {\n        if (c === \">\" || whitespace(c)) {\n            this.emitToken(\"onclosetag\");\n            this._state = 7 /* AfterClosingTagName */;\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.stateAfterClosingTagName = function (c) {\n        // Skip everything until \">\"\n        if (c === \">\") {\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n        }\n    };\n    Tokenizer.prototype.stateBeforeAttributeName = function (c) {\n        if (c === \">\") {\n            this.cbs.onopentagend();\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n        }\n        else if (c === \"/\") {\n            this._state = 4 /* InSelfClosingTag */;\n        }\n        else if (!whitespace(c)) {\n            this._state = 9 /* InAttributeName */;\n            this.sectionStart = this._index;\n        }\n    };\n    Tokenizer.prototype.stateInSelfClosingTag = function (c) {\n        if (c === \">\") {\n            this.cbs.onselfclosingtag();\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n            this.special = 1 /* None */; // Reset special state, in case of self-closing special tags\n        }\n        else if (!whitespace(c)) {\n            this._state = 8 /* BeforeAttributeName */;\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.stateInAttributeName = function (c) {\n        if (c === \"=\" || c === \"/\" || c === \">\" || whitespace(c)) {\n            this.cbs.onattribname(this.getSection());\n            this.sectionStart = -1;\n            this._state = 10 /* AfterAttributeName */;\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.stateAfterAttributeName = function (c) {\n        if (c === \"=\") {\n            this._state = 11 /* BeforeAttributeValue */;\n        }\n        else if (c === \"/\" || c === \">\") {\n            this.cbs.onattribend(undefined);\n            this._state = 8 /* BeforeAttributeName */;\n            this._index--;\n        }\n        else if (!whitespace(c)) {\n            this.cbs.onattribend(undefined);\n            this._state = 9 /* InAttributeName */;\n            this.sectionStart = this._index;\n        }\n    };\n    Tokenizer.prototype.stateBeforeAttributeValue = function (c) {\n        if (c === '\"') {\n            this._state = 12 /* InAttributeValueDq */;\n            this.sectionStart = this._index + 1;\n        }\n        else if (c === \"'\") {\n            this._state = 13 /* InAttributeValueSq */;\n            this.sectionStart = this._index + 1;\n        }\n        else if (!whitespace(c)) {\n            this._state = 14 /* InAttributeValueNq */;\n            this.sectionStart = this._index;\n            this._index--; // Reconsume token\n        }\n    };\n    Tokenizer.prototype.handleInAttributeValue = function (c, quote) {\n        if (c === quote) {\n            this.emitToken(\"onattribdata\");\n            this.cbs.onattribend(quote);\n            this._state = 8 /* BeforeAttributeName */;\n        }\n        else if (this.decodeEntities && c === \"&\") {\n            this.emitToken(\"onattribdata\");\n            this.baseState = this._state;\n            this._state = 62 /* BeforeEntity */;\n            this.sectionStart = this._index;\n        }\n    };\n    Tokenizer.prototype.stateInAttributeValueDoubleQuotes = function (c) {\n        this.handleInAttributeValue(c, '\"');\n    };\n    Tokenizer.prototype.stateInAttributeValueSingleQuotes = function (c) {\n        this.handleInAttributeValue(c, \"'\");\n    };\n    Tokenizer.prototype.stateInAttributeValueNoQuotes = function (c) {\n        if (whitespace(c) || c === \">\") {\n            this.emitToken(\"onattribdata\");\n            this.cbs.onattribend(null);\n            this._state = 8 /* BeforeAttributeName */;\n            this._index--;\n        }\n        else if (this.decodeEntities && c === \"&\") {\n            this.emitToken(\"onattribdata\");\n            this.baseState = this._state;\n            this._state = 62 /* BeforeEntity */;\n            this.sectionStart = this._index;\n        }\n    };\n    Tokenizer.prototype.stateBeforeDeclaration = function (c) {\n        this._state =\n            c === \"[\"\n                ? 23 /* BeforeCdata1 */\n                : c === \"-\"\n                    ? 18 /* BeforeComment */\n                    : 16 /* InDeclaration */;\n    };\n    Tokenizer.prototype.stateInDeclaration = function (c) {\n        if (c === \">\") {\n            this.cbs.ondeclaration(this.getSection());\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n        }\n    };\n    Tokenizer.prototype.stateInProcessingInstruction = function (c) {\n        if (c === \">\") {\n            this.cbs.onprocessinginstruction(this.getSection());\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n        }\n    };\n    Tokenizer.prototype.stateBeforeComment = function (c) {\n        if (c === \"-\") {\n            this._state = 19 /* InComment */;\n            this.sectionStart = this._index + 1;\n        }\n        else {\n            this._state = 16 /* InDeclaration */;\n        }\n    };\n    Tokenizer.prototype.stateInComment = function (c) {\n        if (c === \"-\")\n            this._state = 21 /* AfterComment1 */;\n    };\n    Tokenizer.prototype.stateInSpecialComment = function (c) {\n        if (c === \">\") {\n            this.cbs.oncomment(this.buffer.substring(this.sectionStart, this._index));\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n        }\n    };\n    Tokenizer.prototype.stateAfterComment1 = function (c) {\n        if (c === \"-\") {\n            this._state = 22 /* AfterComment2 */;\n        }\n        else {\n            this._state = 19 /* InComment */;\n        }\n    };\n    Tokenizer.prototype.stateAfterComment2 = function (c) {\n        if (c === \">\") {\n            // Remove 2 trailing chars\n            this.cbs.oncomment(this.buffer.substring(this.sectionStart, this._index - 2));\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n        }\n        else if (c !== \"-\") {\n            this._state = 19 /* InComment */;\n        }\n        // Else: stay in AFTER_COMMENT_2 (`--->`)\n    };\n    Tokenizer.prototype.stateBeforeCdata6 = function (c) {\n        if (c === \"[\") {\n            this._state = 29 /* InCdata */;\n            this.sectionStart = this._index + 1;\n        }\n        else {\n            this._state = 16 /* InDeclaration */;\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.stateInCdata = function (c) {\n        if (c === \"]\")\n            this._state = 30 /* AfterCdata1 */;\n    };\n    Tokenizer.prototype.stateAfterCdata1 = function (c) {\n        if (c === \"]\")\n            this._state = 31 /* AfterCdata2 */;\n        else\n            this._state = 29 /* InCdata */;\n    };\n    Tokenizer.prototype.stateAfterCdata2 = function (c) {\n        if (c === \">\") {\n            // Remove 2 trailing chars\n            this.cbs.oncdata(this.buffer.substring(this.sectionStart, this._index - 2));\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n        }\n        else if (c !== \"]\") {\n            this._state = 29 /* InCdata */;\n        }\n        // Else: stay in AFTER_CDATA_2 (`]]]>`)\n    };\n    Tokenizer.prototype.stateBeforeSpecialS = function (c) {\n        if (c === \"c\" || c === \"C\") {\n            this._state = 34 /* BeforeScript1 */;\n        }\n        else if (c === \"t\" || c === \"T\") {\n            this._state = 44 /* BeforeStyle1 */;\n        }\n        else {\n            this._state = 3 /* InTagName */;\n            this._index--; // Consume the token again\n        }\n    };\n    Tokenizer.prototype.stateBeforeSpecialSEnd = function (c) {\n        if (this.special === 2 /* Script */ && (c === \"c\" || c === \"C\")) {\n            this._state = 39 /* AfterScript1 */;\n        }\n        else if (this.special === 3 /* Style */ && (c === \"t\" || c === \"T\")) {\n            this._state = 48 /* AfterStyle1 */;\n        }\n        else\n            this._state = 1 /* Text */;\n    };\n    Tokenizer.prototype.stateBeforeSpecialLast = function (c, special) {\n        if (c === \"/\" || c === \">\" || whitespace(c)) {\n            this.special = special;\n        }\n        this._state = 3 /* InTagName */;\n        this._index--; // Consume the token again\n    };\n    Tokenizer.prototype.stateAfterSpecialLast = function (c, sectionStartOffset) {\n        if (c === \">\" || whitespace(c)) {\n            this.special = 1 /* None */;\n            this._state = 6 /* InClosingTagName */;\n            this.sectionStart = this._index - sectionStartOffset;\n            this._index--; // Reconsume the token\n        }\n        else\n            this._state = 1 /* Text */;\n    };\n    // For entities terminated with a semicolon\n    Tokenizer.prototype.parseFixedEntity = function (map) {\n        if (map === void 0) { map = this.xmlMode ? xml_json_1.default : entities_json_1.default; }\n        // Offset = 1\n        if (this.sectionStart + 1 < this._index) {\n            var entity = this.buffer.substring(this.sectionStart + 1, this._index);\n            if (Object.prototype.hasOwnProperty.call(map, entity)) {\n                this.emitPartial(map[entity]);\n                this.sectionStart = this._index + 1;\n            }\n        }\n    };\n    // Parses legacy entities (without trailing semicolon)\n    Tokenizer.prototype.parseLegacyEntity = function () {\n        var start = this.sectionStart + 1;\n        // The max length of legacy entities is 6\n        var limit = Math.min(this._index - start, 6);\n        while (limit >= 2) {\n            // The min length of legacy entities is 2\n            var entity = this.buffer.substr(start, limit);\n            if (Object.prototype.hasOwnProperty.call(legacy_json_1.default, entity)) {\n                this.emitPartial(legacy_json_1.default[entity]);\n                this.sectionStart += limit + 1;\n                return;\n            }\n            limit--;\n        }\n    };\n    Tokenizer.prototype.stateInNamedEntity = function (c) {\n        if (c === \";\") {\n            this.parseFixedEntity();\n            // Retry as legacy entity if entity wasn't parsed\n            if (this.baseState === 1 /* Text */ &&\n                this.sectionStart + 1 < this._index &&\n                !this.xmlMode) {\n                this.parseLegacyEntity();\n            }\n            this._state = this.baseState;\n        }\n        else if ((c < \"0\" || c > \"9\") && !isASCIIAlpha(c)) {\n            if (this.xmlMode || this.sectionStart + 1 === this._index) {\n                // Ignore\n            }\n            else if (this.baseState !== 1 /* Text */) {\n                if (c !== \"=\") {\n                    // Parse as legacy entity, without allowing additional characters.\n                    this.parseFixedEntity(legacy_json_1.default);\n                }\n            }\n            else {\n                this.parseLegacyEntity();\n            }\n            this._state = this.baseState;\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.decodeNumericEntity = function (offset, base, strict) {\n        var sectionStart = this.sectionStart + offset;\n        if (sectionStart !== this._index) {\n            // Parse entity\n            var entity = this.buffer.substring(sectionStart, this._index);\n            var parsed = parseInt(entity, base);\n            this.emitPartial(decode_codepoint_1.default(parsed));\n            this.sectionStart = strict ? this._index + 1 : this._index;\n        }\n        this._state = this.baseState;\n    };\n    Tokenizer.prototype.stateInNumericEntity = function (c) {\n        if (c === \";\") {\n            this.decodeNumericEntity(2, 10, true);\n        }\n        else if (c < \"0\" || c > \"9\") {\n            if (!this.xmlMode) {\n                this.decodeNumericEntity(2, 10, false);\n            }\n            else {\n                this._state = this.baseState;\n            }\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.stateInHexEntity = function (c) {\n        if (c === \";\") {\n            this.decodeNumericEntity(3, 16, true);\n        }\n        else if ((c < \"a\" || c > \"f\") &&\n            (c < \"A\" || c > \"F\") &&\n            (c < \"0\" || c > \"9\")) {\n            if (!this.xmlMode) {\n                this.decodeNumericEntity(3, 16, false);\n            }\n            else {\n                this._state = this.baseState;\n            }\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.cleanup = function () {\n        if (this.sectionStart < 0) {\n            this.buffer = \"\";\n            this.bufferOffset += this._index;\n            this._index = 0;\n        }\n        else if (this.running) {\n            if (this._state === 1 /* Text */) {\n                if (this.sectionStart !== this._index) {\n                    this.cbs.ontext(this.buffer.substr(this.sectionStart));\n                }\n                this.buffer = \"\";\n                this.bufferOffset += this._index;\n                this._index = 0;\n            }\n            else if (this.sectionStart === this._index) {\n                // The section just started\n                this.buffer = \"\";\n                this.bufferOffset += this._index;\n                this._index = 0;\n            }\n            else {\n                // Remove everything unnecessary\n                this.buffer = this.buffer.substr(this.sectionStart);\n                this._index -= this.sectionStart;\n                this.bufferOffset += this.sectionStart;\n            }\n            this.sectionStart = 0;\n        }\n    };\n    /**\n     * Iterates through the buffer, calling the function corresponding to the current state.\n     *\n     * States that are more likely to be hit are higher up, as a performance improvement.\n     */\n    Tokenizer.prototype.parse = function () {\n        while (this._index < this.buffer.length && this.running) {\n            var c = this.buffer.charAt(this._index);\n            if (this._state === 1 /* Text */) {\n                this.stateText(c);\n            }\n            else if (this._state === 12 /* InAttributeValueDq */) {\n                this.stateInAttributeValueDoubleQuotes(c);\n            }\n            else if (this._state === 9 /* InAttributeName */) {\n                this.stateInAttributeName(c);\n            }\n            else if (this._state === 19 /* InComment */) {\n                this.stateInComment(c);\n            }\n            else if (this._state === 20 /* InSpecialComment */) {\n                this.stateInSpecialComment(c);\n            }\n            else if (this._state === 8 /* BeforeAttributeName */) {\n                this.stateBeforeAttributeName(c);\n            }\n            else if (this._state === 3 /* InTagName */) {\n                this.stateInTagName(c);\n            }\n            else if (this._state === 6 /* InClosingTagName */) {\n                this.stateInClosingTagName(c);\n            }\n            else if (this._state === 2 /* BeforeTagName */) {\n                this.stateBeforeTagName(c);\n            }\n            else if (this._state === 10 /* AfterAttributeName */) {\n                this.stateAfterAttributeName(c);\n            }\n            else if (this._state === 13 /* InAttributeValueSq */) {\n                this.stateInAttributeValueSingleQuotes(c);\n            }\n            else if (this._state === 11 /* BeforeAttributeValue */) {\n                this.stateBeforeAttributeValue(c);\n            }\n            else if (this._state === 5 /* BeforeClosingTagName */) {\n                this.stateBeforeClosingTagName(c);\n            }\n            else if (this._state === 7 /* AfterClosingTagName */) {\n                this.stateAfterClosingTagName(c);\n            }\n            else if (this._state === 32 /* BeforeSpecialS */) {\n                this.stateBeforeSpecialS(c);\n            }\n            else if (this._state === 21 /* AfterComment1 */) {\n                this.stateAfterComment1(c);\n            }\n            else if (this._state === 14 /* InAttributeValueNq */) {\n                this.stateInAttributeValueNoQuotes(c);\n            }\n            else if (this._state === 4 /* InSelfClosingTag */) {\n                this.stateInSelfClosingTag(c);\n            }\n            else if (this._state === 16 /* InDeclaration */) {\n                this.stateInDeclaration(c);\n            }\n            else if (this._state === 15 /* BeforeDeclaration */) {\n                this.stateBeforeDeclaration(c);\n            }\n            else if (this._state === 22 /* AfterComment2 */) {\n                this.stateAfterComment2(c);\n            }\n            else if (this._state === 18 /* BeforeComment */) {\n                this.stateBeforeComment(c);\n            }\n            else if (this._state === 33 /* BeforeSpecialSEnd */) {\n                this.stateBeforeSpecialSEnd(c);\n            }\n            else if (this._state === 53 /* BeforeSpecialTEnd */) {\n                stateAfterSpecialTEnd(this, c);\n            }\n            else if (this._state === 39 /* AfterScript1 */) {\n                stateAfterScript1(this, c);\n            }\n            else if (this._state === 40 /* AfterScript2 */) {\n                stateAfterScript2(this, c);\n            }\n            else if (this._state === 41 /* AfterScript3 */) {\n                stateAfterScript3(this, c);\n            }\n            else if (this._state === 34 /* BeforeScript1 */) {\n                stateBeforeScript1(this, c);\n            }\n            else if (this._state === 35 /* BeforeScript2 */) {\n                stateBeforeScript2(this, c);\n            }\n            else if (this._state === 36 /* BeforeScript3 */) {\n                stateBeforeScript3(this, c);\n            }\n            else if (this._state === 37 /* BeforeScript4 */) {\n                stateBeforeScript4(this, c);\n            }\n            else if (this._state === 38 /* BeforeScript5 */) {\n                this.stateBeforeSpecialLast(c, 2 /* Script */);\n            }\n            else if (this._state === 42 /* AfterScript4 */) {\n                stateAfterScript4(this, c);\n            }\n            else if (this._state === 43 /* AfterScript5 */) {\n                this.stateAfterSpecialLast(c, 6);\n            }\n            else if (this._state === 44 /* BeforeStyle1 */) {\n                stateBeforeStyle1(this, c);\n            }\n            else if (this._state === 29 /* InCdata */) {\n                this.stateInCdata(c);\n            }\n            else if (this._state === 45 /* BeforeStyle2 */) {\n                stateBeforeStyle2(this, c);\n            }\n            else if (this._state === 46 /* BeforeStyle3 */) {\n                stateBeforeStyle3(this, c);\n            }\n            else if (this._state === 47 /* BeforeStyle4 */) {\n                this.stateBeforeSpecialLast(c, 3 /* Style */);\n            }\n            else if (this._state === 48 /* AfterStyle1 */) {\n                stateAfterStyle1(this, c);\n            }\n            else if (this._state === 49 /* AfterStyle2 */) {\n                stateAfterStyle2(this, c);\n            }\n            else if (this._state === 50 /* AfterStyle3 */) {\n                stateAfterStyle3(this, c);\n            }\n            else if (this._state === 51 /* AfterStyle4 */) {\n                this.stateAfterSpecialLast(c, 5);\n            }\n            else if (this._state === 52 /* BeforeSpecialT */) {\n                stateBeforeSpecialT(this, c);\n            }\n            else if (this._state === 54 /* BeforeTitle1 */) {\n                stateBeforeTitle1(this, c);\n            }\n            else if (this._state === 55 /* BeforeTitle2 */) {\n                stateBeforeTitle2(this, c);\n            }\n            else if (this._state === 56 /* BeforeTitle3 */) {\n                stateBeforeTitle3(this, c);\n            }\n            else if (this._state === 57 /* BeforeTitle4 */) {\n                this.stateBeforeSpecialLast(c, 4 /* Title */);\n            }\n            else if (this._state === 58 /* AfterTitle1 */) {\n                stateAfterTitle1(this, c);\n            }\n            else if (this._state === 59 /* AfterTitle2 */) {\n                stateAfterTitle2(this, c);\n            }\n            else if (this._state === 60 /* AfterTitle3 */) {\n                stateAfterTitle3(this, c);\n            }\n            else if (this._state === 61 /* AfterTitle4 */) {\n                this.stateAfterSpecialLast(c, 5);\n            }\n            else if (this._state === 17 /* InProcessingInstruction */) {\n                this.stateInProcessingInstruction(c);\n            }\n            else if (this._state === 64 /* InNamedEntity */) {\n                this.stateInNamedEntity(c);\n            }\n            else if (this._state === 23 /* BeforeCdata1 */) {\n                stateBeforeCdata1(this, c);\n            }\n            else if (this._state === 62 /* BeforeEntity */) {\n                stateBeforeEntity(this, c);\n            }\n            else if (this._state === 24 /* BeforeCdata2 */) {\n                stateBeforeCdata2(this, c);\n            }\n            else if (this._state === 25 /* BeforeCdata3 */) {\n                stateBeforeCdata3(this, c);\n            }\n            else if (this._state === 30 /* AfterCdata1 */) {\n                this.stateAfterCdata1(c);\n            }\n            else if (this._state === 31 /* AfterCdata2 */) {\n                this.stateAfterCdata2(c);\n            }\n            else if (this._state === 26 /* BeforeCdata4 */) {\n                stateBeforeCdata4(this, c);\n            }\n            else if (this._state === 27 /* BeforeCdata5 */) {\n                stateBeforeCdata5(this, c);\n            }\n            else if (this._state === 28 /* BeforeCdata6 */) {\n                this.stateBeforeCdata6(c);\n            }\n            else if (this._state === 66 /* InHexEntity */) {\n                this.stateInHexEntity(c);\n            }\n            else if (this._state === 65 /* InNumericEntity */) {\n                this.stateInNumericEntity(c);\n                // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n            }\n            else if (this._state === 63 /* BeforeNumericEntity */) {\n                stateBeforeNumericEntity(this, c);\n            }\n            else {\n                this.cbs.onerror(Error(\"unknown _state\"), this._state);\n            }\n            this._index++;\n        }\n        this.cleanup();\n    };\n    Tokenizer.prototype.finish = function () {\n        // If there is remaining data, emit it in a reasonable way\n        if (this.sectionStart < this._index) {\n            this.handleTrailingData();\n        }\n        this.cbs.onend();\n    };\n    Tokenizer.prototype.handleTrailingData = function () {\n        var data = this.buffer.substr(this.sectionStart);\n        if (this._state === 29 /* InCdata */ ||\n            this._state === 30 /* AfterCdata1 */ ||\n            this._state === 31 /* AfterCdata2 */) {\n            this.cbs.oncdata(data);\n        }\n        else if (this._state === 19 /* InComment */ ||\n            this._state === 21 /* AfterComment1 */ ||\n            this._state === 22 /* AfterComment2 */) {\n            this.cbs.oncomment(data);\n        }\n        else if (this._state === 64 /* InNamedEntity */ && !this.xmlMode) {\n            this.parseLegacyEntity();\n            if (this.sectionStart < this._index) {\n                this._state = this.baseState;\n                this.handleTrailingData();\n            }\n        }\n        else if (this._state === 65 /* InNumericEntity */ && !this.xmlMode) {\n            this.decodeNumericEntity(2, 10, false);\n            if (this.sectionStart < this._index) {\n                this._state = this.baseState;\n                this.handleTrailingData();\n            }\n        }\n        else if (this._state === 66 /* InHexEntity */ && !this.xmlMode) {\n            this.decodeNumericEntity(3, 16, false);\n            if (this.sectionStart < this._index) {\n                this._state = this.baseState;\n                this.handleTrailingData();\n            }\n        }\n        else if (this._state !== 3 /* InTagName */ &&\n            this._state !== 8 /* BeforeAttributeName */ &&\n            this._state !== 11 /* BeforeAttributeValue */ &&\n            this._state !== 10 /* AfterAttributeName */ &&\n            this._state !== 9 /* InAttributeName */ &&\n            this._state !== 13 /* InAttributeValueSq */ &&\n            this._state !== 12 /* InAttributeValueDq */ &&\n            this._state !== 14 /* InAttributeValueNq */ &&\n            this._state !== 6 /* InClosingTagName */) {\n            this.cbs.ontext(data);\n        }\n        /*\n         * Else, ignore remaining data\n         * TODO add a way to remove current tag\n         */\n    };\n    Tokenizer.prototype.getSection = function () {\n        return this.buffer.substring(this.sectionStart, this._index);\n    };\n    Tokenizer.prototype.emitToken = function (name) {\n        this.cbs[name](this.getSection());\n        this.sectionStart = -1;\n    };\n    Tokenizer.prototype.emitPartial = function (value) {\n        if (this.baseState !== 1 /* Text */) {\n            this.cbs.onattribdata(value); // TODO implement the new event\n        }\n        else {\n            this.cbs.ontext(value);\n        }\n    };\n    return Tokenizer;\n}());\nexports.default = Tokenizer;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}